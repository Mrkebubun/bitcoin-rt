<DOCTYPE html>
<meta charset="UTF-8"/>
<title>test</title>
<script language="javascript">
    // Create a socket instance
    //var socket = new WebSocket('ws://localhost:8081/bitcoin-rt/');
    var socket = new WebSocket('ws://localhost:1337');
    //var socket = new WebSocket('ws://websocket.mtgox.com/mtgox');

    // Open the socket
    socket.onopen = function(event) {

        // Listen for messages
        socket.onmessage = function(event) {
            document.getElementById('status').innerHTML = 'status: recieving'
            document.getElementById('data').innerHTML += event.data + '<br/>'
        };

        // Listen for socket closes
        socket.onclose = function(event) {
            document.getElementById('status').innerHTML = 'status: connection dropped by remote host.'
        };

        // To close the socket....
        //socket.close()

    };

    function subscribe() {
        socket.send('{"op":"subscribe"}');
        document.getElementById('status').innerHTML = 'status: subscription request sent. waiting.'
    }

    function unsubscribe() {
        socket.send('{"op":"unsubscribe"}');
        document.getElementById('status').innerHTML = 'status: idle. click subscribe to recieve data.'
    }

    function clearData() {
        document.getElementById('data').innerHTML = ''
    }
</script>

<input type="button" value="subscribe" onClick='subscribe()'/>
<input type="button" value="unsubscribe" onClick='unsubscribe()'/>
<input type="button" value="clear" onClick='clearData()'/>
<hr/>
<div id="status">
status: idle. click subscribe to recieve data.
</div>
<hr/>
<div id="data"/>
